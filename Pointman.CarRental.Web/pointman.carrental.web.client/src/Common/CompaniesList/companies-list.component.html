<div class="d-flex justify-content-end mb-3">
  <button class="btn btn-primary btn-lg d-flex align-items-center gap-2 shadow" (click)="openForm()">
    <i class="bi bi-plus-circle-fill"></i>
    {{ getTranslation('ADD_COMPANY') }}
  </button>
</div>

<div class="table-responsive shadow rounded border border-2 border-primary">
  <table class="table table-hover table-bordered align-middle mb-0">
    <thead class="table-primary text-center">
      <tr>
        <th scope="col">#</th>
        <th scope="col"><i class="bi bi-building me-1"></i>{{ getTranslation('COMPANY_NAME') }}</th>
        <th scope="col"><i class="bi bi-geo-alt me-1"></i>{{ getTranslation('COMPANY_LOCATION') }}</th>
        <th scope="col"><i class="bi bi-telephone me-1"></i>{{ getTranslation('COMPANY_PHONE_NUMBER') }}</th>
        <th scope="col"><i class="bi bi-gear me-1"></i>{{ getTranslation('COMPANY_ACTIONS') }}</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let company of paginatedCompanies; let i = index">
        <th scope="row" class="text-center">{{ (currentPage - 1) * itemsPerPage + i + 1 }}</th>
        <td class="fw-semibold text-center text-primary">{{ company.name }}</td>
        <td class="text-center">{{ company.location }}</td>
        <td class="text-center">{{ company.telephoneNumber }}</td>
        <td class="text-center">
          <div class="btn-group" role="group">
            <button class="btn btn-outline-primary btn-sm" (click)="editCompany(company)" title="Edytuj">
              <i class="bi bi-pencil-fill"></i>
            </button>
            <button class="btn btn-outline-danger btn-sm" (click)="openDeleteConfirmation(company)" title="UsuÅ„">
              <i class="bi bi-trash-fill"></i>
            </button>
          </div>
        </td>
      </tr>
    </tbody>
  </table>
</div>

<nav class="d-flex justify-content-between align-items-center mt-3">
  <button class="btn btn-outline-primary" [disabled]="currentPage === 1" (click)="goToPage(currentPage - 1)">
    <i class="bi bi-arrow-left-circle"></i> {{ getTranslation('PREVIOUS') }}
  </button>

  <ul class="pagination mb-0">
    <li *ngFor="let page of [].constructor(totalPages); let i = index" class="page-item" [class.active]="currentPage === i + 1">
      <button class="page-link" (click)="goToPage(i + 1)">{{ i + 1 }}</button>
    </li>
  </ul>

  <button class="btn btn-outline-primary" [disabled]="currentPage === totalPages" (click)="goToPage(currentPage + 1)">
    {{ getTranslation('NEXT') }} <i class="bi bi-arrow-right-circle"></i>
  </button>
</nav>

<div *ngIf="isDeleteConfirmationOpen" class="modal fade show d-block" tabindex="-1" role="dialog" aria-labelledby="deleteModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content border-danger shadow">
      <div class="modal-header bg-danger text-white">
        <h5 class="modal-title"><i class="bi bi-exclamation-triangle-fill me-2"></i>{{ getTranslation('DELETE_CONFIRM') }}</h5>
        <button type="button" class="btn-close" aria-label="Close" (click)="closeDeleteConfirmation()"></button>
      </div>
      <div class="modal-body">
        {{ getTranslation('CONFIRM_COMPANY_DELETE') }} <strong>{{ companyToDelete?.name }}</strong> {{ getTranslation('LOCATED') }} <strong>{{ companyToDelete?.location }}</strong>?
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" (click)="closeDeleteConfirmation()">{{ getTranslation('CANCEL') }}</button>
        <button class="btn btn-danger" (click)="confirmDeleteCompany()">{{ getTranslation('DELETE') }}</button>
      </div>
    </div>
  </div>
</div>

<div *ngIf="isFormOpen" class="modal fade show d-block" tabindex="-1" role="dialog" aria-labelledby="formModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content border-primary shadow">
      <div class="modal-header bg-primary text-white">
        <h5 class="modal-title">
          <i class="bi" [ngClass]="editingCompany ? 'bi-pencil-square' : 'bi-plus-square'"></i>
          {{ editingCompany ? 'Edit Company' : 'Add New Company' }}
        </h5>
        <button type="button" class="btn-close" aria-label="Close" (click)="closeForm()"></button>
      </div>
      <div class="modal-body">
        <app-companies-form *ngIf="isFormOpen"
                            [companyToEdit]="editingCompany"
                            (companyAdded)="addCompanyToList($event)"
                            (closeForm)="closeForm()">
        </app-companies-form>
      </div>
    </div>
  </div>
</div>
